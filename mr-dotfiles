# ~/.config/mr/mr-dotfiles

[DEFAULT]
include =
	cat ~/.config/mr/mr-stow-plugin 2>/dev/null || true
	cat ~/.config/mr/mr-hooks 2>/dev/null || true
lib = . ~/.config/mr/mr-functions

#include =
#  cat ~/.config/mr/groups.d/mr-bootstrap

# sync my repos on local & github
[.config/mr]
order = 1
name = mr-config
chain = true
checkout = git clone rpi3.homelab:/srv/git/crosshatcher/mr-config.git
fixups =
	ensure_symlink_exists ~/.mrconfig $MR_REPO/mr-dotfiles
	ensure_symlink_exists ~/.stow-global-ignore $MR_REPO/.stow-global-ignore

[$HOME/.GIT/vcs/kitenet-mr]
checkout = git clone rpi3.homelab:/srv/git/kitenet-mr.git
fixups = make install
skip = lazy

[$HOME/.GIT/vcs/stow]
checkout = git clone https://git.savannah.gnu.org/git/stow.git $MR_REPO
remote = git_add_remote rpi3.homelab:/srv/git/stow.git
lib = #export STOW_COMMAND=$MR_REPO/.bin/stow
# Install: cpan Test::Output
# doas xbps-install perl-Module-Build perl-IO-stringy perl-Test-Output
fixups =
  autoreconf -iv
  ./configure --prefix=$HOME/.local
  make install
skip = lazy

[$HOME/.pass-android]
checkout = git clone rpi3.homelab:/srv/git/crosshatcher/pass-android.git $MR_REPO
skip = ! my_workstation

[$HOME/.GIT/crosshatcher/dotfiles]
stowable = true
checkout = git clone rpi3.homelab:/srv/git/crosshatcher/dotfiles.git

[$HOME/.GIT/crosshatcher/shlib]
stowable = true
checkout = git clone rpi3.homelab:/srv/git/crosshatcher/shlib.git
skip = ! my_workstation

[$HOME/.vim]
checkout = git clone ssh://git@github.com/crosshatcher/vim-config.git $MR_REPO
remotes = git_add_remote local rpi3.homelab:/srv/git/crosshatcher/vim-config.git
post_checkout = 
  [ -f ~/.vimrc ] || ln -s ~/.vim/vimrc.crosshatcher ~/.vimrc

[$HOME/.GIT/vcs/diff-so-fancy]
checkout = git clone git://github.com/so-fancy/diff-so-fancy.git $MR_REPO
remotes = git_add_remote local rpi3.homelab:/srv/git/diff-so-fancy.git
fixups =
  ./third_party/build_fatpack/build.pl
  install -m 755 /tmp/diff-so-fancy ~/.local/bin/diff-so-fancy
skip = ! my_workstation

[$HOME/.GIT/docker/docker-credential-helpers]
checkout = git clone git://github.com/docker/docker-credential-helpers.git $MR_REPO
remotes = git_add_remote local rpi3.homelab rpi3.homelab:/srv/git/docker-credential-helpers.git
fixups =
  make pass
  install -m 755 bin/docker-credential-pass ~/.local/bin/docker-credential-pass
skip = ! my_workstation

[$HOME/android/myandroid]
checkout = git clone ssh://git@github.com/wandsas/myandroid.git $MR_REPO
remotes = git_add_remote local rpi3.homelab:/srv/git/myandroid.git
fixups =
  [ -L ~/android/envsetup.sh ] || ln -s ~/android/myandroid/envsetup.sh ~/android
skip = ! is_android_dev_env

# vim:fenc=utf-8:ft=dosini:ts=2:sts=2:sw=2:et:
